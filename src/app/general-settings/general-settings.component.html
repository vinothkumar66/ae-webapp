<div class="sett">
  <span>General Settings</span>
</div>

<dx-tab-panel
  [selectedIndex]="0"
  [animationEnabled]="true"
  [deferRendering]="false"
  [swipeEnabled]="true"
  tabsPosition="right"
  [width]="'100%'"
  [height]="'100%'"
>
  <dxi-item title="Change Password" template="ChangePassword"></dxi-item>
  <dxi-item title="Basic Settings" template="GeneralSettings"></dxi-item>

  <div *dxTemplate="let data of 'ChangePassword'">
    <dx-form 
      [formData]="changePasswordData"
      [colCount]="2"
      labelLocation="top"
    >
      <dxi-item 
        dataField="currentPassword" 
        editorType="dxTextBox"
        [editorOptions]="getEditorOptions('currentPassword')"
      >
      </dxi-item>

      <dxi-item 
        dataField="newPassword" 
        editorType="dxTextBox"
        [editorOptions]="getEditorOptions('newPassword')"
      >
      </dxi-item>

      <dxi-item 
        dataField="confirmPassword" 
        editorType="dxTextBox"
        [editorOptions]="getEditorOptions('confirmPassword')"
      >
      </dxi-item>
    </dx-form>

    <div style="margin-top: 16px; display: flex; gap: 12px;">
      <dx-button
        text="Change"
        type="default"
        stylingMode="contained"
        (onClick)="handleChange()"
      >
      </dx-button>

      <dx-button
        text="Clear"
        type="normal"
        stylingMode="outlined"
        (onClick)="handleClear()"
      >
      </dx-button>
    </div>
  </div>

  <div *dxTemplate="let data of 'GeneralSettings'">
    <dx-form 
      [formData]="generalSettingsData"
      [colCount]="2"
      labelLocation="top"
    >
      <dxi-item 
        dataField="HeaderName"
        editorType="dxTextBox"
        [editorOptions]="{ placeholder: 'Header Name' }">
      </dxi-item>

      <dxi-item 
        dataField="LoginHeaderName"
        editorType="dxTextBox"
        [editorOptions]="{ placeholder: 'Login Header Name' }">
      </dxi-item>

      <dxi-item>
        <div class="custom-uploader">
          <span>Pick Logo</span>
          <label class="custom-file-upload">
            Choose Logo...
            <input
              type="file"
              accept="image/jpeg, image/png, image/jpg"
              (change)="handleImageUpload($event)"
            />
          </label>
          <div class="image-preview" *ngIf="logoPreviewUrl">
            <img [src]="logoPreviewUrl" alt="Logo Preview" />
          </div>
        </div>
      </dxi-item>

      <dxi-item>
        <div class="custom-uploader">
          <span>Pick Background Image</span>
          <label class="custom-file-upload">
            Choose Background Image...
            <input
              type="file"
              accept="image/jpeg, image/png, image/jpg"
              (change)="handleBgImageUpload($event)"
            />
          </label>
          <div class="image-preview" *ngIf="bgImagePreviewUrl">
            <img [src]="bgImagePreviewUrl" alt="Background Image Preview" />
          </div>
        </div>
      </dxi-item>
    </dx-form>

    <div class="form-action">
      <dx-button 
        text="Save" 
        (onClick)="saveFormData()" 
        type="default"
      >
      </dx-button>
    </div>
  </div>
</dx-tab-panel>
